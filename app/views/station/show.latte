{extends '../layout.latte'}

{block headscript}
		<script src="/public/js/main.js" nonce="{$nonce}"></script>
{/block}

{block content}
<h1>{$station->description}</h1>
{if ($station->currentDataPoint)}
<small>Mise Ã  jour le {$station->currentDataPoint->dateutc|date:'d/m/Y Ã  H\hi'} <button id="refresh" class="button" style="font-size: .75em;" disabled>Actualiser</button></small>
<div class="tabs {if ($username)}three{else}two{/if}">
	<input id='tab-1' type='radio' name='tabgroupB' checked />
	<label class="pseudo button toggle" for="tab-1">Actuel</label>
	<input id='tab-2' type='radio' name='tabgroupB'>
	<label class="pseudo button toggle" for="tab-2">Vent</label>
	{if ($username)}
	<input id='tab-3' type='radio' name='tabgroupB'>
	<label class="pseudo button toggle" for="tab-3">IntÃ©rieur</label>
	<input id='tab-evol' type='radio' name='tabgroubB'>
	<label for='tab-evol'><a class="pseudo button toggle" href="{route('station_evolution', ['station_id' => $station->station_id])}">Evolution</a></label>
	{/if}

	<div class="row">
		<div>
			<h2>Actuel</h2>
			<div class="flex two three-800 four-1000 six-1600">
				<div>
				<article class="card" style="height: 100%;">
					<header style="text-align: center;"><strong>ğŸŒ¡&nbsp;ï¸TempÃ©rature</strong></header>
					<span class="label pseudo" style="margin: 0;"><h1>{$station->currentDataPoint->tempc}&nbsp;Â°C</h1></span>
				</article>
				</div>
				<div>
				<article class="card" style="height: 100%;">
					<header style="text-align: center;"><strong>ğŸ’¦&nbsp;HumiditÃ©</strong></header>
					<span class="label pseudo" style="margin: 0;"><h1>{$station->currentDataPoint->humidity}&nbsp;%</h1></span>
				</article>
				</div>
				<div>
				<article class="card" style="height: 100%;">
					<header style="text-align: center;"><strong>ğŸ›&nbsp;Pression atmosphÃ©rique</strong></header>
					<span class="label pseudo" style="margin: 0;"><h1>{$station->currentDataPoint->barohpa}&nbsp;HPa</h1></span>
				</article>
				</div>
				<div>
				<article class="card" style="height: 100%;">
					<header style="text-align: center;"><strong>ğŸ’§&nbsp;Point de rosÃ©e</strong></header>
					<span class="label pseudo" style="margin: 0;"><h1>{$station->currentDataPoint->dewptc}&nbsp;Â°C</h1></span>
				</article>
				</div>
				<div>
				<article class="card" style="height: 100%;">
					<header style="text-align: center;"><strong>ğŸŒ§ï¸ï¸&nbsp;Pluie quotidienne</strong></header>
					<span class="label pseudo" style="margin: 0;"><h1>{$station->currentDataPoint->dailyrainmm}&nbsp;mm</h1></span>
				</article>
				</div>
				<div>
				<article class="card" style="height: 100%;">
					<header style="text-align: center;"><strong>â˜”ï¸&nbsp;IntensitÃ© de pluie</strong></header>
					<span class="label pseudo" style="margin: 0;"><h1>{$station->currentDataPoint->rainmm}&nbsp;mm/h</h1></span>
				</article>
				</div>
				<div>
				<article class="card" style="height: 100%;">
					<header style="text-align: center;"><strong>ğŸŒ&nbsp;Rayonnement solaire</strong></header>
					<span class="label pseudo" style="margin: 0;"><h1>{$station->currentDataPoint->solarradiation}&nbsp;W/mÂ²</h1></span>
				</article>
				</div>
				<div>
				<article class="card" style="height: 100%;">
					<header style="text-align: center;"><strong>ğŸ”¥&nbsp;Indice UV</strong></header>
					<span class="label pseudo" style="margin: 0;"><h1>{$station->currentDataPoint->UV}</h1></span>
				</article>
				</div>
			</div>
		</div>

		<div>
			<h2>Vent</h2>
			<div class="flex two three-800 four-1000 six-1600">
				<div>
				<article class="card" style="height: 100%;">
					<header style="text-align: center;">ğŸƒ&nbsp;Vitesse du vent</header>
					<span class="label pseudo" style="margin: 0;"><h1>{$station->currentDataPoint->windspeedkmh}&nbsp;km/h</h1></span>
				</article>
				</div>
				<div>
				<article class="card" style="height: 100%;">
					<header style="text-align: center;">ğŸŒ¬ï¸&nbsp;Rafale maximale de vent</header>
					<span class="label pseudo" style="margin: 0;"><h1>{$station->currentDataPoint->windgustkmh}&nbsp;km/h</h1></span>
				</article>
				</div>
				<div>
				<article class="card" style="height: 100%;">
					<header style="text-align: center;">ğŸ§­&nbsp;Direction du vent</header>
					<span class="label pseudo" style="margin: 0;"><h1>{$station->currentDataPoint->winddir}&nbsp;Â°</h1></span>
				</article>
				</div>
				<div>
				<article class="card" style="height: 100%;">
					<header style="text-align: center;">ğŸ§­&nbsp;Direction du vent</header>
					<span class="label pseudo" style="margin: 0;"><h1>{$station->currentDataPoint->windcardinal}</h1></span>
				</article>
				</div>
			</div>
		</div>
		
		{if ($username)}
		<div>
			<h2>IntÃ©rieur</h2>
			<div class="flex two three-800 four-1000 six-1600">
				<div>
				<article class="card" style="height: 100%;">
					<header style="text-align: center;">ğŸ &nbsp;TempÃ©rature</header>
					<span class="label pseudo" style="margin: 0;"><h1>{$station->currentDataPoint->indoortempc}&nbsp;Â°C</h1></span>
				</article>
				</div>
				<div>
				<article class="card" style="height: 100%;">
					<header style="text-align: center;">ğŸš°&nbsp;HumiditÃ©</header>
					<span class="label pseudo" style="margin: 0;"><h1>{$station->currentDataPoint->indoorhumidity}&nbsp;%</h1></span>
				</article>
				</div>
			</div>
		</div>
		{/if}
</div>
{else}

<div>
	<p>Aucune donnÃ©e</p>
</div>

{/if}



{if ($username)}
	<a class="button" href="{route('station_edit', [ 'station_id' => $station->station_id ])}">Modifier</a>
	
	<label for="modal_1" class="button warning">Supprimer</label>
	<div class="modal">
	  <input id="modal_1" type="checkbox" />
	  <label for="modal_1" class="overlay"></label>
	  <article>
	    <header>
	      <h3>Supprimer la station ?</h3>
	      <label for="modal_1" class="close">&times;</label>
	    </header>
	    <section class="content">
	      Attention, la suppression de la station est dÃ©finitive. Les donnÃ©es (tempÃ©ratures,...) sont conservÃ©es.
	    </section>
	    <footer>
	      <label for="modal_1" class="button">
	        Annuler
	      </label>
	      <a class="button dangerous" href="{route('station_delete', [ 'station_id' => $station->station_id ])}">Supprimer</a>
	    </footer>
	  </article>
	</div>
{/if}


{/block}